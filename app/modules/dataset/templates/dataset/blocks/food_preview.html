<div class="card shadow-sm rounded-2xl p-4 bg-white">
  <h3 class="text-lg font-semibold text-gray-800 mb-3">üç≤ Food Dataset</h3>

  <ul class="text-sm text-gray-700 space-y-1">
    <li><strong>Total de alimentos:</strong> {{ dataset.calculate_total_foods() }}</li>
    <li><strong>Total de calor√≠as:</strong> {{ dataset.calculate_total_calories() }} kcal</li>
    <li><strong>Calor√≠as promedio:</strong> {{ "%.1f"|format(dataset.calculate_average_calories()) }} kcal</li>
    <li><strong>Tama√±o total:</strong> {{ dataset.get_file_total_size_for_human() }}</li>
  </ul>

  {% set type_distribution = dataset.get_type_distribution() %}
  {% if type_distribution %}
  <div class="mt-3">
    <strong class="text-sm text-gray-700">Distribuci√≥n por tipo:</strong>
    <div class="flex flex-wrap gap-1 mt-1">
      {% for food_type, count in type_distribution.items() %}
        <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">
          {{ food_type }}: {{ count }}
        </span>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  {% set nutritional_averages = dataset.get_nutritional_averages() %}
  {% if nutritional_averages %}
  <div class="mt-3">
    <strong class="text-sm text-gray-700">Promedios nutricionales:</strong>
    <div class="grid grid-cols-2 gap-1 mt-1 text-xs">
      {% for nutrient, value in nutritional_averages.items() %}
        <div class="flex justify-between">
          <span class="text-gray-600">{{ nutrient.replace('_', ' ').title() }}:</span>
          <span class="font-medium">{{ "%.1f"|format(value) }}</span>
        </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <hr class="my-3 border-gray-200" />

  {% set all_foods = dataset.get_all_foods() %}
  {% if all_foods %}
  <div class="mt-3">
    <strong class="text-sm text-gray-700">Alimentos en el dataset:</strong>
    <div class="mt-2 space-y-2">
      {% for food in all_foods %}
        <div class="bg-gray-50 p-3 rounded-lg">
          <div class="flex justify-between items-start">
            <div>
              <h4 class="font-medium text-gray-800">{{ food.name }}</h4>
              <p class="text-xs text-gray-600">
                {{ food.calories }} ‚Ä¢ {{ food.type }}
              </p>
            </div>
            <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">
              {{ food.type }}
            </span>
          </div>
          
          {% if food.nutritional_values %}
          <div class="mt-2 grid grid-cols-2 gap-1 text-xs">
            {% for nutrient, value in food.nutritional_values.items() %}
              <div class="flex justify-between">
                <span class="text-gray-600">{{ nutrient.replace('_', ' ').title() }}:</span>
                <span class="font-medium">{{ value }}</span>
              </div>
            {% endfor %}
          </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <hr class="my-3 border-gray-200" />

  {% for fm in dataset.feature_models %}
    {% for file in fm.files %}
      {% if file.name.lower().endswith('.food') %}
        <details class="mb-2">
          <summary class="font-medium text-gray-800 cursor-pointer">
            üìñ {{ file.name }}
          </summary>
          <pre class="bg-gray-50 text-sm p-2 rounded mt-1">{{ file.read_content() }}</pre>
        </details>
      {% endif %}
    {% endfor %}
  {% endfor %}
</div>