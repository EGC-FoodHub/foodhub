#!/bin/sh
#
# commit-msg hook para validar Conventional Commits
# Se ejecuta automáticamente cuando haces `git commit`

# Leer el mensaje del commit
commit_message=$(cat "$1")

# Expresión regular del formato esperado
conventional_regex='^(feat|fix|docs|style|refactor|test|chore)(\([a-z0-9_-]+\))?: .{1,}$'

# Validar
if echo "$commit_message" | grep -Eq "$conventional_regex"; then
    echo "✅ Commit message cumple con Conventional Commits."
else
    echo "❌ Commit message inválido."
    echo "El formato correcto es: type(scope): descripción"
    exit 1
fi
